<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cultural Diversity of Australia</title>
    <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap" rel="stylesheet">

    <style>
        /* Style for the header banner */
        header {
          background-color: #303030; /* Green background */
          color: white; /* White text color */
          padding: 30px; /* Padding around the banner */
          text-align: center; /* Center the text */
          font-size: 32px; /* Increase font size */
          font-weight: bold;
          letter-spacing: 2px;
        }
        
        /* Additional styling for body */
        body {
          margin: 0;
          font-family: 'Roboto', sans-serif;
          background-color: #b0c4de;
        }
        
        h1 {
            text-align: center;
            letter-spacing: 1px;
        }

        p {
            text-align: justify;
            line-height: 1.4;
        }

        .infoContent {
            height:100%;
            width:1200px;
            margin: 0 auto;
            background-color: white;
            padding: 20px;
        }

        .infoSection {
            display: flex;
            flex-direction: row;
            justify-content: space-around;
            align-items: center;
        }

        .infoText {
            width:400px;
            background-color: #e0e0e0;
            padding: 20px;
            border-radius: 20px;
        }

        .infoChart {
            width:800px;
        }
        
        .intro {
            width: 50%;
            margin: 0 auto;
            padding-bottom: 20px;
        }

        .footer {
            width: 50%;
            margin: 0 auto;
            padding-top: 20px;
            text-align: center;
        }

    </style>

</head>

<body>

    <!-- Header banner -->
    <header>
        Cultural Diversity of Australia
    </header>
    
    <div class="infoContent">

        <div class="intro">
            <h1>Cultural Diversity</h1>
            <p>
                Cultural diversity is the presence of a variety of cultures or ethnic groups in a given social environment, such as countries and communities. It encompasses differences in language, religion, traditions, customs, values, and social behaviors that people from different cultural backgrounds bring to the community.
                <br><br>
                In Australia, cultural diversity is one of its most defining characteristics, as it has seen many waves of immigration since its colonisation in 1788. These immigration booms include:
            </p>
            <ul>
                <li><b>Gold Rush</b> (1850s-1860s) - Europeans and Chinese</li>
                <li><b>Post World War 2</b> (1945-1970s) - Europeans and Refugees</li>
                <li><b>End of the White Australia Policy</b> (1970s-1980s) - Asian Countries (Vietnamese, Chinese, etc)</li>
                <li><b>Skilled Migration Boom</b> (1990s-Present) - Significant immigration from Asian Countries</li>
            </ul>
        </div>

        <div class="infoSection">
            <div class="infoText">
                <h1>Ancestry Diversity</h1>
                <p>
                    As a testament to Australia's multiculturalism, over 67% of the population, as of 2021, are of foreign ancestry, and over 33% of the population was born in a foreign country. The flow map to the right shows the ancestry of residents of Australia from the top 20 countries.
                    <br><br>
                    Australia was originally colonised by the British, with many subsequent waves of European migration throughout its history up until the present. This is evident in the foreign ancestry of the Austrlian population, with European countries make up 11 of the top 20 foreign ancestries. This can be observed in the flow map, showing a density of flows from the continent of Europe. Additionally, the United Kingdom (England, Scotland, Wales and Northern Ireland) are the top country by a large margin, also observable in adjacent flow map.
                    <br><br>
                    Furthermore, due to the more recent immigration booms introducing significant immigration from asian countries, 7 of the top 20 foreign ancestries are from the continent of Asia.
                </p>
            </div>
            <div id="map1"></div>
        </div>

        <div class="infoSection">
            <div id="map2"></div>
            <div class="infoText">
                <h1>Ancestry Distribution</h1>
                <p>
                    Australia is made up of 8 different states. Each of these states see differing amounts of diversity from a range of ancestries. This can be observed by changing the selected ancestry in the choropleth map to the left.
                    <br><br>
                    When looking for diversity within individual states, Victoria seems to be the most multicultural, with it exhibiting the highest or one of the highest percentages for most of the non-Australian ancestries (e.g. Indian, Italian, Greek, Chinese). This is also supported by the fact that it is the lowest in percentage for Australian-related ancestries (Australian, Australian Aboriginal).
                    <br><br>
                    Analysing the map, it is interesting to note that despite making up only 3% of the Australian Population, Australian Aboriginals make up a significantly large proportion of the population in the Northern Territory when compared to the other states, at nearly 25% of the population. Additionally, it is interesting that ancestries of countries in the British Isles (English, Irish, Scottich) are more common in states other than the Northern Territory.

                </p>
            </div>
        </div>
        <div class="infoSection">
            <div class="infoText">
                <h1>Language Diversity</h1>
                <p>
                    Other than diversity through ancestry, diversity can also be measured through the languages residents of Australia speak, with over 20% of the population speaking another language at home. The first bar chart shows the proportion of each state's population which only speak English. The second bar chart shows the number of persons which speak languages other than English at home.
                    <br><br>
                    When looking at diversity through language, other than the Northern Territory, Victoria is the most diverse with 28% of its population speaking a language other than English at home. This aligns with the conclusion drawn from diversity through ancestry.
                    <br><br>
                    The Northern Territy is most likely the most diverse in language due to the such a high proportion of the population being of Australian Aboriginal descent, making 15% of the 32% of other languages spoken at home.

                </p>
            </div>
            <div class="infoChart">
                <div id="chart1"></div>
                <div id="chart2"></div>
            </div>
        </div>

        <div class="footer">
            Created by Stefan Su.<br>Data Sourced From <a href="https://www.abs.gov.au/census/find-census-data/search-by-area">Australian Census 2021</a>
        </div>

        <script>
            const spec1 = {
                "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
                "width": 700,
                "height": 400,
                "layer": [
                {
                    "data": {
                    "url": "vis/data/world_map.json",
                    "format": {
                        "type": "topojson",
                        "feature": "custom.geo"
                    }
                    },
                    "transform": [
                    {
                        "lookup": "properties.name",
                        "from": {
                        "data": {
                            "url": "vis/data/AncestryAus.csv",
                            "format": {"type": "csv"}
                        },
                        "key": "Country",
                        "fields": ["Country"]
                        }
                    },
                    {
                        "calculate": "datum.Country == 'Australia' ? 'Australia' : (datum.Country !== null ? 'Highlighted' : 'Normal')",
                        "as": "highlight_status"
                    }
                    ],
                    "projection": {
                    "type": "mercator",
                    "center": [25, 15],  
                    "scale": 130
                    },
                    "mark": {
                    "type": "geoshape",
                    "stroke": "white"
                    },
                    "encoding": {
                    "color": {
                        "field": "highlight_status",
                        "type": "nominal",
                        "scale": {
                            "domain": ["Australia","Highlighted", "Normal"],
                            "range": ["#ff746c","#b0c4de", "lightgray"]
                        },
                        "legend": null
                    }
                    }
                },
                {
                    "data": {
                    "url": "vis/data/ne_110m_graticules_30.json",
                    "format": {
                        "type": "topojson",
                        "feature": "ne_110m_graticules_30"
                    }
                    },
                    "projection": {
                    "type": "mercator",
                    "center": [25, 15],  
                    "scale": 130
                    },
                    "mark": {
                    "type": "geoshape",
                    "stroke": "lightblue",
                    "strokeWidth": 0.5
                    }
                },
                {
                    "data": {
                    "url": "vis/data/AncestryAus.csv"
                    },
                    "transform": [
                    {
                        "lookup": "Country",
                        "from": {
                        "data": {
                            "url": "vis/data/countries.csv"
                        },
                        "key": "name",
                        "fields": ["latitude", "longitude"]
                        },
                        "as": ["origin_latitude", "origin_longitude"]
                    },
                    {
                        "calculate": "-25.2744",
                        "as": "dest_latitude"
                    },
                    {
                        "calculate": "133.7751",
                        "as": "dest_longitude"
                    }
                    ],
                    "projection": {
                    "type": "mercator",
                    "center": [25, 15],  
                    "scale": 130
                    },
                    "mark": {
                    "type":"rule",
                    "color": "#347cd9",
                    "opacity": 0.5
                    },
                    "encoding": {
                    "longitude": {
                        "field": "origin_longitude",
                        "type": "quantitative"
                    },
                    "latitude": {
                        "field": "origin_latitude",
                        "type": "quantitative"
                    },
                    "strokeWidth": {
                        "field": "Persons",
                        "type": "quantitative",
                        "scale": {
                            "range": [1, 8]
                        },
                        "legend": null
                    },
                    "longitude2": {"field": "dest_longitude"},
                    "latitude2": {"field": "dest_latitude"},
                    "tooltip": [
                        {"field": "Country", "type": "nominal", "title": "Country of Birth"},
                        {"field": "Persons", "type": "quantitative", "title": "Number of Persons"}
                    ]
                    }
                },
                {
                    "data": {
                    "values":[
                        {"state_name": "France", "lat":4.346785 ,"long":-52.994037}
                    ]
                    },
                    "projection": {
                    "type": "mercator",
                    "center": [25, 15],  
                    "scale": 130
                    },
                    "mark": {
                    "type":"text",
                    "fill": "blue",
                    "fontSize": 8,
                    "fontWeight": "bold",
                    "dy":-8,
                    "dx":15
                    },
                    "encoding":  {
                    "latitude": {
                        "field": "lat"
                    },
                    "longitude": {
                        "field": "long"
                    },
                    "text": {
                        "field": "state_name"
                    }
                    }
                }
                ],
                "title": "Number of Persons born from Foreign Countries (Top 20)"
            }
            vegaEmbed('#map1', spec1);
        </script>

        <script>
            const spec2 = {
                "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
                "width": 500,
                "height": 300,
                "params": [
                    {
                        "name": "Ancestry_selection",
                        "value": "Australian",
                        "bind": {
                            "input": "select",
                            "options": [
                                "Australian",
                                "English",
                                "Irish",
                                "Chinese",
                                "Scottish",
                                "Italian",
                                "Australian Aboriginal",
                                "German",
                                "Indian",
                                "Greek"
                            ],
                            "labels": [
                                "Australian",
                                "English",
                                "Irish",
                                "Chinese",
                                "Scottish",
                                "Italian",
                                "Australian Aboriginal",
                                "German",
                                "Indian",
                                "Greek"
                            ],
                            "name": "Ancestry: "
                        }
                    }
                ]
                ,
                "layer": [
                {
                    "data": {
                    "url": "vis/data/ancestryStates.csv",
                    "format": {
                        "type": "csv"
                    }
                    },
                    "transform": [{
                    "lookup": "State",
                    "from": {
                        "data": {
                        "url": "vis/data/STE_2021_AUST_GDA2020.json",
                        "format": {
                            "type": "topojson",
                            "feature": "STE_2021_AUST_GDA2020"
                        }
                        },
                        "key": "properties.STE_NAME21"
                    },
                    "as": "geo"
                    },
                    {
                        "calculate": "(datum.Persons / datum.Total) * 100",
                        "as": "Ancestry %"
                    },
                    {
                        "filter": "datum.Ancestry == Ancestry_selection"
                    }],
                    "projection": {
                    "type": "mercator"
                    },
                    "mark": {
                        "type": "geoshape",
                        "stroke": "white"
                    },
                    "encoding": {
                    "shape": {"field": "geo", "type": "geojson"}, 
                    "color": {
                        "field": "Ancestry %",
                        "type": "quantitative",
                        "scale": {
                            "scheme": "reds"
                        }
                    },
                    "tooltip": [
                        {"field": "State", "title": "State"},
                        {"field": "Ancestry", "title": "Ancestry"},
                        {"field": "Ancestry %", "title": "Ancestry %", "format": ".2f"}
                    ]
                    }
                }
                ]
                
            }
            vegaEmbed('#map2', spec2);

        </script>

        <script>
            const spec3 = {
                "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
                "data": {
                    "url": "vis/data/englishOnlySpeakers.csv"
                },
                "mark": {
                    "type": "bar",
                    "tooltip": true
                },
                "width": {"step": 25},
                "encoding": {
                    "x": {
                    "field": "State",
                    "type": "ordinal",
                    "title": "State",
                    "axis": {
                        "labelAngle": -45
                    }
                    },
                    "y": {
                    "aggregate": "sum",
                    "field": "Amount",
                    "type": "quantitative",
                    "stack": "normalize",
                    "title": "Percentage"
                    },
                    "color": {
                    "field": "Language",
                    "type": "nominal",
                    "title": "Language",
                    "scale": {
                        "range": ["#347cd9", "#ff6961", "#ababab"]
                    }
                    }
                },
                "config": {
                    "view": {"stroke": "transparent"},
                    "axis": {"labelFontSize": 12, "titleFontSize": 14}
                },
                "title": "% of English-Only Speakers by State"
            }
            vegaEmbed('#chart1', spec3);
        </script>

        <script>
            const spec4 = {
                "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
                "width": 400,
                "height": 300,
                "params": [
                    {
                        "name": "State_selection",
                        "value": "Australia",
                        "bind": {
                            "input": "select",
                            "options": [
                                "Australia",
                                "Western Australia",
                                "Northern Territory",
                                "South Australia",
                                "Queensland",
                                "New South Wales",
                                "Australian Capital Territory",
                                "Tasmania",
                                "Victoria"
                            ],
                            "labels": [
                                "Australia",
                                "Western Australia",
                                "Northern Territory",
                                "South Australia",
                                "Queensland",
                                "New South Wales",
                                "Australian Capital Territory",
                                "Tasmania",
                                "Victoria"
                            ],
                            "name": "State Selection: "
                        }
                    }
                ],
                "data": {
                "url": "vis/data/top10languages.csv"
                },
                "transform": [
                    {
                        "filter": "datum.State == State_selection"
                    }
                ], 
                "mark": {
                    "type": "bar",
                    "color": "#347cd9"
                },
                "width": {"step": 20},
                "encoding": {
                    "x": {
                        "field": "Language",
                        "type": "nominal",
                        "title": "Language",
                        "sort": "-y",
                        "axis": {
                            "labelAngle": -45
                        }
                    },
                    "y": {
                        "field": "Amount",
                        "type": "quantitative",
                        "title": "Amount"
                    },
                    "tooltip": [
                        {"field": "State", "type": "nominal", "title": "State"},
                        {"field": "Language", "type": "nominal", "title": "Language"},
                        {"field": "Amount", "type": "quantitative", "title": "Amount"}
                    ]
                },
                "title": "Number of Speakers of Foreign Languages"
            }
            vegaEmbed('#chart2', spec4);
        </script>
    </div>
</body>

</html>